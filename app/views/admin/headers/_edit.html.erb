<%= admin_header_tag(record) do %>
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">
        <%= record.class.model_name.singular.titleize %> <%= record.id %>
      </h3>
    </div>
    <div class="panel-body">
      <div class="row">
        <div class="col-sm-6">
          <h1>
            <%= record_name record %>
          </h1>
        </div>
        <div class="col-sm-6 text-right">
          <div class="btn-group">
            <% if try(:respond_to?, "new_admin_#{record.class.model_name.singular}_path") %>
              <%= link_to "New", send("new_admin_#{record.class.model_name.singular}_path"), title: "Create a new #{record.class.model_name.singular.titleize}", class: 'btn btn-default' %>
            <% end %>
            <%= link_to "All", send("admin_#{record.class.model_name.plural}_path"), title: "View all #{record.class.model_name.plural.titleize}", class: 'btn btn-default' %>
            <% if respond_to? "#{record.class.model_name.singular}_path" %>
              <%= link_to "Show", send("#{record.class.model_name.singular}_path", record.to_friendly_param), title: "View this #{record.class.model_name.singular.titleize}", class: 'btn btn-default' %>
            <% elsif try(:respond_to?, "admin_#{record.class.model_name.singular}_path") %>
              <%= link_to "Show", send("admin_#{record.class.model_name.singular}_path", record), title: "View this #{record.class.model_name.singular.titleize}", class: 'btn btn-default' %>
            <% end %>
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <span class="caret"></span>
              <span class="sr-only">Toggle Dropdown</span>
            </button>
            <ul class="dropdown-menu dropdown-menu--right">
              <% record_namespaces = record.model_name.collection.split('/') %>
              <% record_namespaces = record_namespaces.take(record_namespaces.length - 1) %>
              <li><%= link_to "Destroy", [:admin, *record_namespaces, record].reject(&:blank?), method: :delete, data: { confirm: "Are you sure you want to destroy this #{record.class.model_name.singular}?" } %></li>
            </ul>
          </div>
          <% if try(:respond_to?, "update_admin_#{record.class.model_name.singular}_path") %>
            <div class="btn btn-success update-record-button">Update <%= record.class.model_name.singular.titleize %></div>
          <% end %>
        </div>
      </div>
      <% if record.try(:draft?) %>
        <div class="row">
          <br>
          <div class="col-sm-6">
            <p class="text-muted">
              <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
              This <%= record.class.model_name.singular.titleize %> is in Draft mode. You can make edits and update the <%= record.class.model_name.singular.titleize %> and the changes will not be visible to the public.
              You can preview the draft, and when you are ready to make the changes live, switch the status back to published.
            </p>
          </div>
        </div>
      <% end %>
    </div>
  </div>
  <div class="btn btn-success update-record-button fixed-update-record-button" id="fixed-update-record-button">Update <%= record.class.model_name.singular.titleize %></div>
<% end %>
